'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},DEFAULT_PREFIX='vuex-persisted-shared-state';exports.default=function(){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return function(b){if('undefined'!=typeof window&&window.localStorage){for(var i in a={share:a.share||!0,prefix:a.prefix||DEFAULT_PREFIX},mutations)mutations[i]={name:'object'==_typeof(mutations[i])?mutations[i].name:mutations[i],share:'object'!=_typeof(mutations[i])||mutations[i].share||!0,defaultValue:'object'==_typeof(mutations[i])?mutations[i].defaultValue||null:null};var c=function(b,c){return window.localStorage.setItem(a.prefix+'__'+b,JSON.stringify(c))},d=function(b){return JSON.parse(window.localStorage.getItem(a.prefix+'__'+b))},e=function(b){return window.localStorage.removeItem(a.prefix+'__'+b)};try{c('@@','test'),e('@@')}catch(a){return}var f=function(a,c){c=null==c||null==c.payload?mutations[a].defaultValue:c.payload,b.commit(a,c)},g=function(){for(var a in mutations)f(a,d(mutations[a].name))};window.hasOwnProperty('onNuxtReady')?window.onNuxtReady(function(){return g()}):g();var h=function(a){return mutations.hasOwnProperty(a.type)};b.subscribe(function(a){h(a)&&c(mutations[a.type].name,a)}),window.addEventListener('storage',function(b){if(a.share){var c=b.key,d=JSON.parse(b.newValue);for(var e in mutations)mutations[e].share&&f(e,null==c?null:d)}})}}},module.exports=exports['default'];
