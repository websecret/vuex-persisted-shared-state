'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},DEFAULT_PREFIX='vuex-persisted-shared-state';exports.default=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return function(c){if('undefined'!=typeof window&&window.localStorage){for(var l in b={share:b.share||!0,prefix:b.prefix||DEFAULT_PREFIX},a)a[l]={name:'object'==_typeof(a[l])?a[l].name:a[l],share:'object'!=_typeof(a[l])||a[l].share||!0,defaultValue:'object'==_typeof(a[l])?a[l].defaultValue||null:null};var d=function(a){return b.prefix+'__'+a},e=function(a,b){return window.localStorage.setItem(d(a),JSON.stringify(b))},f=function(a){return JSON.parse(window.localStorage.getItem(d(a)))},g=function(a){return window.localStorage.removeItem(d(a))};try{e('@@','test'),g('@@')}catch(a){return}var h=function(b,d){d=null==d||null==d.payload?a[b].defaultValue:d.payload,c.commit(b,d)},i=function(){for(var b in a)h(b,f(a[b].name))};window.hasOwnProperty('onNuxtReady')?window.onNuxtReady(function(){return i()}):i();var j=function(b){return a.hasOwnProperty(b.type)},k=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return null==c||!1!=a[b].share&&d(a[b].name)==c};c.subscribe(function(b){j(b)&&e(a[b.type].name,b)}),window.addEventListener('storage',function(c){if(b.share){var d=c.key,e=JSON.parse(c.newValue);for(var f in a)k(f,d)&&h(f,null==d?null:e)}})}}},module.exports=exports['default'];
