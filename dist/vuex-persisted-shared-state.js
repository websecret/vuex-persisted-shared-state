'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},DEFAULT_PREFIX='vuex-persisted-shared-state';exports.default=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return function(c){if('undefined'!=typeof window&&window.localStorage){for(var j in b={share:b.share||!0,prefix:b.prefix||DEFAULT_PREFIX},a)a[j]={name:'object'==_typeof(a[j])?a[j].name:a[j],share:'object'!=_typeof(a[j])||a[j].share||!0,defaultValue:'object'==_typeof(a[j])?a[j].defaultValue||null:null};var d=function(a,c){return window.localStorage.setItem(b.prefix+'__'+a,JSON.stringify(c))},e=function(a){return JSON.parse(window.localStorage.getItem(b.prefix+'__'+a))},f=function(a){return window.localStorage.removeItem(b.prefix+'__'+a)};try{d('@@','test'),f('@@')}catch(a){return}var g=function(b,d){d=null==d||null==d.payload?a[b].defaultValue:d.payload,c.commit(b,d)},h=function(){for(var b in a)g(b,e(a[b].name))};window.hasOwnProperty('onNuxtReady')?window.onNuxtReady(function(){return h()}):h();var i=function(b){return a.hasOwnProperty(b.type)};c.subscribe(function(b){i(b)&&d(a[b.type].name,b)}),window.addEventListener('storage',function(c){if(b.share){var d=c.key,e=JSON.parse(c.newValue);for(var f in a)a[f].share&&g(f,null==d?null:e)}})}}},module.exports=exports['default'];
